
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Anton Sundqvist" name="author"/>
<link href="http://astemes.com/20_Framework%20Architecture/" rel="canonical"/>
<link href="../Style/logo.png" rel="icon"/>
<meta content="mkdocs-1.2.3, mkdocs-material-7.3.4" name="generator"/>
<title>Framework Architecture - Astemes LUnit</title>
<link href="../assets/stylesheets/main.db9e7362.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.3f5d1f46.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<link href="../Style/style.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#framework-architecture">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Astemes LUnit" class="md-header__button md-logo" data-md-component="logo" href=".." title="Astemes LUnit">
<img alt="logo" src="../Style/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Astemes LUnit
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Framework Architecture
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/astemes/astemes-lunit/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Astemes LUnit" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Astemes LUnit">
<img alt="logo" src="../Style/logo.png"/>
</a>
    Astemes LUnit
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/astemes/astemes-lunit/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../10_Basics/">
        Basics
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Framework Architecture
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Framework Architecture
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#general-architecture">
    General Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-case">
    Test Case
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-methods">
    Test Methods
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assertions">
    Assertions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-runner">
    Test Runner
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-finder">
    Test Finder
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labview-api">
    LabVIEW API
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#low-level-api">
    Low Level API
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-line-interface">
    Command Line Interface
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../24_Profiling%20Tools/">
        Profiling Tools
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../30_CI%20Integration/CI%20Integration/">
        CI Integration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../40_Real-Time%20Systems/">
        Real-Time Systems
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../81_Creating%20Report%20Plugins/Creating%20Report%20Plugins/">
        Creating Report Plugins
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          License
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="License" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          License
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../90_License/10_Astemes%20LUnit/LICENSE/">
        Astemes LUnit
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../90_License/80_JKI%20Flat%20UI%20Controls/JKI%20Flat%20UI%20Controls%202.0%20License/">
        JKI Flat UI Controls
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#general-architecture">
    General Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-case">
    Test Case
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-methods">
    Test Methods
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assertions">
    Assertions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-runner">
    Test Runner
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-finder">
    Test Finder
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#labview-api">
    LabVIEW API
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#low-level-api">
    Low Level API
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-line-interface">
    Command Line Interface
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/astemes/astemes-lunit/edit/master/docs/20_Framework Architecture/index.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="framework-architecture">Framework Architecture</h1>
<p>The LUnit unit testing framework is derived from the xUnit architecture.
This page briefly introduces the main concepts.
The core was rewritten as of version 1.2 and the discussion below is accurate only for versions more recent than 1.2.</p>
<h2 id="general-architecture">General Architecture</h2>
<p>The framework defines a Runnable interface, which, as the name, implies defines a class as runnable.
The base Test Case class implements the runnable interface and an execution of a test is done by instantiating an object of a Test Case class and running it.
To run more than one test, multiple instances of the Test Case class are instantiated.</p>
<p>Multiple tests may be aggregated into a Test Suite object, which also implements the Runnable interface, and may be executed by calling the Run VI on the Test Suite.
While a Test Case will always be done after one call to the Run VI, a Test Suite may require multiple calls before being done.
Test Suites may form composites (suites of suites), but this is not visible through the Runnable interface.</p>
<p>Test Suites are typically generated through test discovery using factory VIs located in the Test Suite class. 
These VI:s can generate test suites containing all tests in a specific class, library or project.</p>
<h2 id="test-case">Test Case</h2>
<p>A Test Case is the base class containing all test methods which are included in the test case.
The Test Case class defines two dynamic dispatch test methods called Setup.vi and Teardown.vi.
These methods are executed before and after each test method in the test case.</p>
<h2 id="test-methods">Test Methods</h2>
<p>A test method is a VI belonging to a class inheriting from the Test Case class.
It is not recommended to make test methods have Dynamic Dispatch terminals.
As of version 1.8, it is not longer required for test method names to start with the letters <code>test</code>.
The connector pane of the test case must use the 4-2-2-4 pattern and have the standard connectors for static dispatch methods (the error input being optional as there will never be any upstreams errors coming into the test vi).</p>
<p><img alt="Test method connector pane" src="img/test_method_connector_pane.png"/></p>
<h2 id="assertions">Assertions</h2>
<p>Tests are evaluated by one or more assertions called in the test method.
The assertions are available from the LUnit palette and the quick drop menu.
Assertions are evaluated when the test case executes and the result of the assertions are reported by the framework.
Multiple assertions may be used in a single test method and results from all assertions will be available in the test report.
A test case will fail if one or more of the assertions fail.
Likewise a test case will produce an error result if one or more of the assertions receives an error on the <code>Error In</code> terminal.</p>
<p><img alt="LUnit Palette" src="img/LUnit_palette.PNG"/></p>
<h2 id="test-runner">Test Runner</h2>
<p>A test runner is a process executing a Test Suite and collecting the results.
LUnit supports spawning multiple parallel test runners, which can significantly reduce the test time for large test suites.
Test runners may run in separate threads and can leverage a multithreaded processor to run tests concurrently.
When the Parallel Test Runner is enabled, tests are grouped into one suite for each Test Case class and all these are then executed in separate threads.</p>
<h2 id="test-finder">Test Finder</h2>
<p>When launching the LUnit UI, the test finder searches for classes inheriting from the base Test Class within the current application instance.
The result is saved into an index file and retrieved on subsequent runs to only search through classes which have changed since last time.
To force the test finder to recreate the index, use the refresh test index button in the LUnit UI.</p>
<h2 id="labview-api">LabVIEW API</h2>
<p>An API is provided for executing tests programmatically from LabVIEW.
The use of the API is illustrated in the <code>LUnit API Demo</code> example.</p>
<p><img alt="LUnit API" src="img/LUnit_api.PNG"/></p>
<p>The API was simplified in version 1.2.6 and now only consists of one VI for running tests from a path.
The reason for this change is that the low level API, provided earlier, had some sensitivity to internal changes and made updates more difficult.</p>
<p>The low level API is still used by the high level API method and the low level VIs may be used to alter the behavior of the test execution.
Because of the low level nature, this API is more volatile and may break in later releases, while the high level method is very likely to remain stable.</p>
<h2 id="low-level-api">Low Level API</h2>
<p>Before going on, see the warning in the previous section.
Now continue on your own risk.</p>
<p>The low level API may be use to run tests in various ways.
Tests are executed using the provided methods and results are returned using User Events, which may be registered for using the provided API method.
To use the API methods, an API reference must first be obtained using the <code>LUnit Open API Reference.vi</code>.
The configuration VI:s <code>LUnit Configure Reporting.vi</code> and <code>LUnit Configure Test Runner.vi</code>  should be used before executing a test.</p>
<p>A test case is executed by calling one of the Run Test API VI:s.
To observe the results of the test execution, the <code>LUnit Register for Events.vi</code> must be called before starting test execution.
Results are returned using a data object through the user event registration.</p>
<p>When the execution has completed a result with type <code>Test Run</code> is generated.
To abort a running test, use the <code>LUnit Abort.vi</code>.
When done, use the <code>LUnit Close API Reference.vi</code> and unregister for any event obtained from <code>LUnit Register for Events.vi</code>.</p>
<h2 id="command-line-interface">Command Line Interface</h2>
<p>LUnit exposes a command line interface (CLI) to <a href="../30_CI%20Integration/CI%20Integration/">enable execution from continuous integration tools</a>.
LUnit adds an operation to the LabVIEWCLI when installed.
Please note that LUnit must be installed for the version of LabVIEW called from the CLI.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Basics" class="md-footer__link md-footer__link--prev" href="../10_Basics/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Basics
            </div>
</div>
</a>
<a aria-label="Next: Profiling Tools" class="md-footer__link md-footer__link--next" href="../24_Profiling%20Tools/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Profiling Tools
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2021 - 2025 Astemes
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
            Material for MkDocs
          </a>
 ... <a class="link--pdf-download" download href="..\Astemes LUnit.pdf" title="PDF">download PDF</a></div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
<script src="../assets/javascripts/bundle.1e84347e.min.js"></script>
</body>
</html>